#! /usr/bin/env python
# coding=utf-8
# ================================================================
#   Copyright (C) 2022 . All rights reserved.
#
#   File name   : train_config.yaml
#   Author      : ronen halevy 
#   Created date:  7/19/22
#   Description :
#
# ================================================================
---

#training_dataset_config:
input_data_source: tfrecords # images_dir_annot_file # [tfrecords, images_dir_annot_file, coco_debug_data]
#tfrecords:
train_tfrecords:  datasets/shapes/new_test/input/tfrecords/train # /home/ronen/PycharmProjects/create-tfrecords/dataset/tfrecords/train #datasets/shapes/three_circles/input/tfrecords/train #  datasets/shapes/red_circle/input/tfrecords/train # datasets/shapes/circle_and_triangle/input/tfrecords/train
val_tfrecords: datasets/shapes/new_test/input/tfrecords/val #/home/ronen/PycharmProjects/create-tfrecords/dataset/tfrecords/test #datasets/shapes/three_circles/input/tfrecords/val # datasets/shapes/red_circle/input/tfrecords/val # datasets/shapes/circle_and_triangle/input/tfrecords/val
#plain_dataset:
images_dir: datasets/shapes/three_circles/input/images_and_annotations_file/images #datasets/shapes/three_mixed_shapes/red/input/images_and_annotations/images # directory location of input images used in non-tfrecords_keep mode
annotations_path: ddatasets/shapes/three_circles/input/images_and_annotations_file/annotations.yaml
classes_name_file: datasets/shapes/new_test/class.names # datasets/shapes/three_circles/class.names #   datasets/shapes/circle_and_triangle/class.names # 'datasets/shapes/class.names'
anchors_file: datasets/shapes/anchors/shapes_yolov3_anchors.txt
dataset_cuttof_size: null # null or size limit value

dataset_repeats: 0
max_bboxes: 100

#model_config:
model_config_file: config/models/yolov3/model_thin_heads.yaml # config/yolov3_model.yaml
image_size: 416
grid_sizes_table:
  - 13
  - 26
  - 52


training_mode: fit # eager_tf # fit # 'model execution mode. choices=[eager_tf, fit]'
batch_size: 8
epochs: 1000
learning_rate: 0.001
early_stopping: False # enables early_stopping callback
early_stop_patience: 13 # an early_stopping callback parameter
weights_save_peroid: 4
output_checkpoints_path: checkpoints/yolov3_train.tf # prefix of path checkpoints save


transfer_learning_config:
  transfer_list: # all, none, backbone, or neck (equivalent to listing backbone and neck)
#    - all
    - none
#    - backbone
#    - neck
#    - head
  freeze_train_list: # Can omit. Note: selecting neck does not imply to  backbone
     - none
#    - backbone
#    - neck
  batch_norm_freeze_list:  # Can omit. Note: selecting neck does not imply to  backbone
    - none
#    - backbone
#    - neck
#    - head

  input_weights_path:  checkpoints/yolov3_train_circle_and_triangle_thin_heads.tf # checkpoints/yolov3_train_circle_and_triangle.tf # checkpoints/yolov3_train_rb_circles.tf #'checkpoints/yolov3_train_newclass5.tf' #path to pretrained weights file

#checkpoints/yolov3_train_circle_and_triangle.tf
#training_etc_config:
debug_mode: False #  run developpers' test code lines
render_dataset_example: False

